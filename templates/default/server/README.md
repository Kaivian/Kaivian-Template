# Server (Node.js / Express)

This is the backend workspace of the monorepo generated by Kaivian-Template. It uses Express, dotenv, cors, and morgan for a simple API server.

## Prerequisites
- Node.js >= 18
- npm >= 9

## Getting Started
From the monorepo root, install dependencies and start in development:
```bash
npm install
npm run dev -w server
```
Alternatively, run directly from the server workspace:
```bash
cd server
npm install
npm run dev
```

The dev script runs nodemon, which reloads on file changes. The default start port is typically configured in `src/index.js` (often 4000). Adjust as needed.

## Scripts
From the monorepo root using the workspace flag:
- `npm run dev -w server`   – Start server in development with hot reload
- `npm run start -w server` – Start server in production mode
- `npm run build -w server` – Build step placeholder (currently no build)
- `npm run test -w server`  – Run server tests once (Node built-in test runner)
- `npm run test:watch -w server` – Watch mode for tests
- `npm run debug -w server` – Start server with Node inspector via nodemon

From within `server/` directly:
- `npm run dev`
- `npm start`
- `npm run build`
- `npm test`
- `npm run test:watch`
- `npm run debug`

## Environment Variables
Copy `.env.example` to `.env` inside the `server/` folder and edit values:
- `PORT` – Server port (e.g., 4000)
- Any other secrets or configuration values you add

Example (Windows PowerShell to create a copy):
```powershell
Copy-Item .env.example .env
```

Load order is handled via `dotenv` in the code. Do not commit real secrets to version control.

## Project Structure
```
server/
├─ package.json
├─ src/
│  └─ index.js        # Express app bootstrap (routes, middleware)
└─ .env.example       # Template for environment variables
```

- Add routes/controllers under `src/` as your app grows.
- Middleware such as `cors` and `morgan` can be configured in `src/index.js`.

## API
This template starts from a minimal Express setup. Open `src/index.js` to see available routes (e.g., a health check). Extend with additional routes, controllers, and services as needed.

## Production
Build step is currently a no-op. For production, ensure environment variables are set and run:
```bash
npm start -w server
```
Consider a process manager (e.g., PM2) or containerization for deployments.

## Troubleshooting
- Port already in use: change `PORT` in `.env` or stop the conflicting process.
- Changes not reloading: ensure `nodemon` is installed (dev dependency) and you’re using the `dev` script.
- CORS issues: configure allowed origins in your CORS setup inside `src/index.js`.

## License
MIT © 2025 Kaivian
